---
title: "Перекладчик"
date: 2021-10-05T22:57:32+03:00
type: relocator
menu:
  main:
    name: "Перекладчик"
    weight: 803
    parent: 'Файловый шлюз'
---

# Перекладчик
---

Перекладчик - это программное обеспечение (далее ПО), предназначенное для переноса файлов из системы клиента в [файловый шлюз](/terms/index.html#a-namefsha-фш-файловый-шлюз-нрд) (далее ФШ) и обратно.

## Установка

Для установки Перекладчика необходимо совершить следующие действия:

1. Получить дистрибутив Перекладчика у специалистов Отдела продаж НРД.
2. Изменить параметры в файле конфигурации FileTransfer.exe.config, если необходимо (см. Рисунок 1). По умолчанию прописаны следующие параметры:
    - Путь к директории INBOX Файлового шлюза: `c:\Temp\RB\fgate\inbox`
    - Путь к директории OUTBOX Файлового шлюза: `c:\Temp\RB\fgate\outbox`
    - Путь к директории для входящих в АБС файлов: `c:\Temp\RB\abs`
    - Фильтр для исходящих из АБС файлов: `*.enc`
    - Путь к директории с обработанными входящими файлами: `c:\Temp\RB\ft\prcsd`

| ![](/images/relocator/1.png "Рисунок 1") |
|:------------------------------------------:|
| *Рисунок 1*                                |

3. Запустить файл `FileTransfer.exe` для установки ПО (см. Рисунок 2).

| ![](/images/relocator/2.png "Рисунок 2") |
|:------------------------------------------:|
| *Рисунок 2*                                |

4. После установки в папке по умолчанию `С:\Temp\RB` появятся указанные в файле конфигурации директории (см. Рисунок 3).

| ![](/images/relocator/3.png "Рисунок 3") |
|:------------------------------------------:|
| *Рисунок 3*                                |

5. При подключении ФШ к ПО необходимо в настройках ФШ указать путь к рабочей папке `fgate` (см. Рисунок 4).

| ![](/images/relocator/4.png "Рисунок 4") |
|:------------------------------------------:|
| *Рисунок 4*                                |

6. В результате в папке `fgate` будут созданы папки ФШ (см. Рисунок 5).

| ![](/images/relocator/5.png "Рисунок 5") |
|:------------------------------------------:| 
| *Рисунок 5*                                |

## Структура файловой системы

В папке Перекладчика → RB находятся папки `abs, fgate, ft, logs` (см. Рисунок 6).

| ![](/images/relocator/6.png "Рисунок 6") |
|:------------------------------------------:|
| *Рисунок 6*                                |

Банк работает с папкой `abs`, в которой созданы папки по номеру клиента (соответствие деп.кода и кода клиента задается в файле `FileTransfer.exe.config` ПО). Внутри каждой папки по номеру клиента есть еще две папки `номер клиента` и `OUT` (см. Рисунок 7).

| ![](/images/relocator/7.png "Рисунок 7") |
|:------------------------------------------:|
| *Рисунок 7*                                |

В папку с `номером клиента` автоматически приходит файл поручение в формате `.xml`, для загрузки в АБС. В папку `OUT` должны выкладываться файлы-статусы и выписки для отправки клиенту. Файлы `winf.xml` создаются автоматически Перекладчиком при переносе файлов из `OUT` в `outbox` ФШ.


Папка fgate предназначена для файлов ФШ и содержит в себе структуру папок ФШ:
- `ERRORS` - служит хранилищем для ошибочных файлов, некорректно принятых или отправленных.
- `inbox` - служит для получения файлов по Onyx от клиентов (платежные поручения, запросы на выписки). Файлы будут приходить в соответствующей структуре – два файла и две подписи.
- `outbox` - служит для отправки файлов клиентам (статусов по платежным поручениям, выписок).
- `REPCLIENTS` - служит для загрузки списка репозитарных участников в формате `.xml`, `.csv`.
- `SENT` - служит хранилищем для отправленных файлов из `outbox`.

Папка `ft` служит хранилищем для пришедших файлов, то есть когда приходит файл в папку ФШ `inbox` он автоматически перекладывается в папку `ft\prcsd`.
Папка `logs` служит хранилищем для лог-файлов.

## Механика работы

Пример движения Платежного поручение (ПП) по папкам:
1. ПП приходит от клиента по Onyx в ФШ в папку `inbox`.
2. ПО Перекладчик перекладывает все содержимое папки в папку `ft\prcsd` и отбирает файл `\*.xml`.
3. Затем Перекладчик перекладывает файл `\*.xml` в папку для АБС `abs\номер_клиента` по соответствию код клиента = деп.код. Также, автоматически, в папку `outbox` выкладывается файл-квитанция о получении пакета для отправки на адрес клиента.
4. Из папки с `номером клиента` файл загружается в АБС (в АБС происходят различные проверки и по результатам могут выкладываться промежуточные статусы в папку `OUT`: Принято, Проверены реквизиты и прочие).
5. Когда АБС генерирует финальный статус, он также выкладывается в папку `OUT`.
6. ПО Перекладчик автоматически перекладывает файл с финальным статусом в папку для отправки (`outbox`) ФШ, генерируя к нему файл `winf.xml`.

Аналогичным образом происходит работа с выписками и запросами на выписку.

На Рисунке 8 отображена таблица с сутью процесса и папками, в которые попадает файл.

*fg = `fgate`, cc = `номер клиента`, in = `номер клиента`, out = `OUT`*

| ![](/images/relocator/8.png "Рисунок 8") |
|:------------------------------------------:|
| *Рисунок 8*                                |
